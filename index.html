<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ben Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap');

* { margin:0; padding:0; box-sizing:border-box; user-select:none; }
body {
    font-family:'Inter',sans-serif;
    background:#0b1a2a;
    color:#fff;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:40px 10px;
    transition: background 0.3s;
}

.pfp {
    width: 120px;
    height: 120px;
    border-radius:50%;
    overflow:hidden;
    margin-bottom:15px;
    box-shadow:0 0 25px #3399ff88;
    animation: glow 3s infinite alternate;
}
.pfp img { width:100%; height:100%; object-fit:cover; }

@keyframes glow {
    0% { box-shadow:0 0 15px #3399ff44; }
    50% { box-shadow:0 0 35px #3399ff; }
    100% { box-shadow:0 0 15px #3399ff44; }
}

h1 { font-size:26px; margin:8px 0; font-weight:800; text-align:center; }
.tag { opacity:0.7; margin-bottom:12px; font-size:13px; text-align:center; }

.links {
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
    max-width:380px;
    margin-top:10px;
}

.btn {
    padding:10px 14px;
    text-align:center;
    background:#102b45;
    border-radius:12px;
    font-size:14px;
    color:white;
    text-decoration:none;
    border:1px solid #3399ff;
    transition:0.3s;
    flex:1 0 40%;
    text-overflow:ellipsis;
    white-space:nowrap;
    overflow:hidden;
}
.btn:hover {
    background:#3399ff;
    color:black;
    transform:scale(1.05);
    box-shadow:0 0 15px #3399ff88;
}

/* Spotify */
.spotify-card {
    background:#102b45;
    border-radius:20px;
    padding:15px 20px;
    width:100%;
    max-width:380px;
    margin-top:25px;
    display:flex;
    gap:12px;
    border:1px solid #1DB954;
    box-shadow:0 0 20px #3399ff44;
    transition:0.3s;
    align-items:center;
}
.spotify-card:hover { transform:translateY(-3px); }

.spotify-cover img {
    width:60px;
    height:60px;
    border-radius:12px;
    object-fit:cover;
}

.s-info { display:flex; flex-direction:column; justify-content:center; flex:1; }
.s-title { font-size:15px; font-weight:bold; color:#fff; display:flex; align-items:center; gap:6px; }
.s-artist { font-size:12px; opacity:0.8; margin-top:3px; }
.progress-bar { width:100%; height:5px; background:#0b1a2a; border-radius:10px; overflow:hidden; margin-top:6px; }
.progress { height:100%; background:#1DB954; width:0%; transition:width 0.2s; }
.time { font-size:11px; opacity:0.6; margin-top:4px; display:flex; justify-content:space-between; align-items:center; }

/* Badges */
.badges { display:flex; justify-content:center; gap:5px; margin-bottom:8px; }
.badge img { width:20px; height:20px; }

.spotify-logo { width:16px; height:16px; }
</style>
</head>
<body>

<div class="pfp"><img id="avatar" src=""></div>
<h1 id="username">Loading...</h1>
<div class="badges" id="badges"></div>
<div class="tag" id="discord-status">Checking status...</div>

<div class="links">
    <a class="btn" href="https://discord.com/users/1033745912071192688" target="_blank">Discord</a>
    <a class="btn" href="https://open.spotify.com/user/" target="_blank">Spotify Profile</a>
    <a class="btn" href="#">TikTok</a>
    <a class="btn" href="#">Instagram</a>
</div>

<div id="spotify-box"></div>

<script>
const USER_ID = "1033745912071192688";

async function updateLanyard() {
    try {
        const res = await fetch(`https://api.lanyard.rest/v1/users/${USER_ID}`);
        const data = await res.json();
        if(!data.success) return;

        const d = data.data;

        // Avatar
        document.getElementById("avatar").src = `https://cdn.discordapp.com/avatars/${USER_ID}/${d.discord_user.avatar}.png?size=512`;

        // Username
        document.getElementById("username").innerText = d.discord_user.username;

        // Status
        const statusText = { online:"ðŸŸ¢ Online", idle:"ðŸŒ™ Idle", dnd:"â›” Do Not Disturb", offline:"âš« Offline" };
        document.getElementById("discord-status").innerText = statusText[d.discord_status];

        // Badges
        const badgesDiv = document.getElementById("badges");
        badgesDiv.innerHTML = "";
        if(d.discord_user.flags) {
            const flags = d.discord_user.flags;
            const badgeURLs = {
                1:"https://cdn.discordapp.com/badges/discord_employee.png", 
                2:"https://cdn.discordapp.com/badges/partner.png",
                4:"https://cdn.discordapp.com/badges/hypesquad_balance.png",
                8:"https://cdn.discordapp.com/badges/hypesquad_brilliance.png",
                64:"https://cdn.discordapp.com/badges/hypesquad_bravery.png"
            };
            for(const key in badgeURLs) {
                if(flags & key) {
                    const img = document.createElement("img");
                    img.src = badgeURLs[key];
                    img.classList.add("badge");
                    badgesDiv.appendChild(img);
                }
            }
        }

        // Spotify
        const spotifyBox = document.getElementById("spotify-box");
        if(d.spotify) {
            const s = d.spotify;
            const start = s.timestamps?.start;
            const end = s.timestamps?.end;
            const progressPercent = (start && end) ? ((Date.now()-start)/(end-start))*100 : 0;
            const currentSeconds = start ? Math.floor((Date.now()-start)/1000) : 0;
            const totalSeconds = end ? Math.floor((end-start)/1000) : 0;

            spotifyBox.innerHTML = `
                <div class="spotify-card">
                    <div class="spotify-cover"><img src="${s.album_art_url}"></div>
                    <div class="s-info">
                        <div class="s-title"><img class="spotify-logo" src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg" alt="Spotify Logo">${s.song}</div>
                        <div class="s-artist">${s.artist}</div>
                        <div class="progress-bar"><div class="progress" style="width:${progressPercent}%;"></div></div>
                        <div class="time"><span>${formatTime(currentSeconds)}</span><span>${formatTime(totalSeconds)}</span></div>
                    </div>
                </div>
            `;
        } else { spotifyBox.innerHTML=""; }

    } catch(err){ console.error(err); }
}

function formatTime(sec){
    const m=Math.floor(sec/60);
    const s=sec%60;
    return `${m}:${s.toString().padStart(2,'0')}`;
}

updateLanyard();
setInterval(updateLanyard,1000);
</script>

</body>
</html>
